function isEmail(e){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e.trim())}function inArray(e,t){return-1!=e.indexOf(t)}function validate(e,...t){switch(e){case"email":return isEmail(t[0]);case"in array":return inArray(t[0],t[1]);default:return"what do you want?"}}function showError(e,t){if(e.nextElementSibling&&e.nextElementSibling.id!==`${e.type}-error`||!e.nextElementSibling){const n=document.createElement("p");n.id=`${e.type}-error`,n.classList.add("error-input"),n.innerHTML=t,e.parentNode.appendChild(n)}return e.focus(),!1}function changeTab(e,t){let n,r=e.href.replace(/.*#(\w+)/i,"$1");for(let o=0;o<t.length;o++)t[o]===e?(e.classList.add("tab-nav-active"),document.getElementById(r).classList.add("tab-pane-active")):t[o].classList.contains("tab-nav-active")&&(t[o].classList.remove("tab-nav-active"),n=t[o].href.replace(/.*#(\w+)/i,"$1"),document.getElementById(n).classList.remove("tab-pane-active"))}function toggleNavTab(e){document.body.clientWidth<=720&&document.querySelector(`${e} .tab-item:first-child`).addEventListener("click",function(){document.querySelectorAll(`${e} .tab-item:not(:first-child)`).foreach(function(e){e.style.display="none"==e.style.display?"block":"none"})})}Element.prototype.css=function(e){for(prop in e)e.hasOwnProperty(prop)&&this.style.setProperty(prop,e[prop])},Element.prototype.hasClass=function(e){return this.classList.contains(e)||this.parentNode.classList.contains(e)},document.addEventListener("input",function(e){if("INPUT"==e.target.tagName){let t=e.target.nextElementSibling;t&&"error-input"==t.className&&t.remove()}}),document.addEventListener("change",function(e){if("INPUT"==e.target.tagName){let t=e.target.parentNode.getElementsByClassName("error-input")[0];t&&"error-input"==t.className&&t.remove()}}),document.querySelector(".search-box input[type=text]").addEventListener("input",function(){this.value.trim().length>0?document.getElementById("btn-reset").style.setProperty("display","initial"):document.getElementById("btn-reset").style.setProperty("display","none")}),document.querySelector(".search-box input[type=text]").addEventListener("mouseover",function(){this.value.trim().length>0?document.getElementById("btn-reset").style.setProperty("display","initial"):document.getElementById("btn-reset").style.setProperty("display","none")}),document.getElementById("btn-reset").addEventListener("click",function(){this.previousElementSibling.value="",this.previousElementSibling.focus(),this.style.setProperty("display","none")}),document.getElementById("search-form").addEventListener("submit",function(e){e.preventDefault(),window.location="/tim-kiem/"+this.querySelector("input[name=se]").value.trim()});try{document.getElementsByClassName("btn-upload")[0].addEventListener("click",function(){0==document.getElementsByClassName("upload").length?$.ajax({url:"/Photos/loadFormUpload",success:function(e){document.querySelector("body script").insertAdjacentHTML("beforebegin",e);let t=document.createElement("script"),n=document.getElementById("uploadjs");t.src=n.getAttribute("data-src"),document.body.appendChild(t),n.remove(),setTimeout(function(){document.getElementsByClassName("upload")[0].css({opacity:1,visibility:"visible"})},10)},error:function(e){console.error("Error on loadFormUpload: ",e)}}):document.getElementsByClassName("upload")[0].css({opacity:1,visibility:"visible"})})}catch(e){console.error(e)}document.addEventListener("click",function(e){let t=e.target.closest(".btn-dropdown");if(t){let e=document.getElementsByClassName("btn-dropdown-menu"),n=t.getElementsByClassName("btn-dropdown-menu")[0];for(let t=e.length-1;t>=0;t--)e[t]===n?n.classList.toggle("show"):e[t].classList.remove("show")}else!!document.querySelector(".btn-dropdown-menu.show")&&document.querySelector(".btn-dropdown-menu.show").classList.remove("show")});let setting=document.querySelectorAll(".settings .tab-nav");for(let e=setting.length-1;e>=0;e--)setting[e].addEventListener("click",function(e){e.preventDefault(),changeTab(this,setting)});let pp=document.querySelector('#settings input[type="file"]');window.File&&window.FileReader&&window.FileList&&window.Blob?pp.addEventListener("change",function(e){let t=e.target.files[0];if(t&&t.type.match("image.*")){let e=new FileReader,n=new Image;e.onload=function(e){if(!inArray(["JPG","JPEG","PNG","GIF"],t.name.slice(2+(t.name.lastIndexOf(".")-1>>>0)).toUpperCase()))return pp.value="",showError(pp,"Ảnh phải thuộc định dạng JPG, JPEG, PNG hoặc GIF");document.querySelector(".user-pp.preview-image")?document.getElementsByClassName("user-pp")[1].src=e.target.result:(document.getElementsByClassName("user-pp")[1].classList.add("preview-image"),document.getElementsByClassName("user-pp")[1].src=e.target.result)},e.readAsDataURL(t),n.onload=function(){this.width>260&&(showError(pp,"Chiều rộng tối đa là 260px"),pp.value="")},n.src=(window.URL||window.webkitURL).createObjectURL(t)}else showError(pp,"Không đúng định dạng ảnh"),pp.value=""},!1):console.warn("The browser does not support File API");let sex=document.querySelectorAll("input[name=sex]");for(let e=sex.length-1;e>=0;e--)sex[e].addEventListener("click",function(e){document.querySelector(".pseudo-radio.checked").classList.remove("checked"),this.nextElementSibling.firstElementChild.classList.add("checked")});document.querySelector("#settings form").addEventListener("submit",function(e){e.preventDefault();let t=document.querySelector('input[name="email"]'),n=document.querySelector('input[name="lname"]'),r=document.querySelector('input[name="fname"]'),o=document.querySelector('input[name="interests"]'),i=document.querySelector('input[name="location"]');return""===t.value.trim()?showError(t,"Không được để trống Email"):!1===isEmail(t.value)?showError(t,"Email không hợp lệ"):""===n.value.trim()?showError(n,"Không được để trống Họ"):n.value.trim().length>40?showError(n,"Họ quá dài"):""===r.value.trim()?showError(r,"Không được để trống Tên"):r.value.trim().length>10?showError(r,"Tên quá dài"):o.value.trim().length>100?showError(o,"Có vẻ như bạn có quá nhiều Sở thích"):i.value.trim().length>255?showError(i,"Địa điểm quá dài"):void this.submit()}),document.querySelector("#change-password form").addEventListener("submit",function(e){e.preventDefault();let t=document.querySelector('input[name="new"]'),n=document.querySelector('input[name="old"]'),r=document.querySelector('input[name="verify"]');return""===n.value.trim()?showError(n,"Không được để trống Mật khẩu cũ"):n.value.trim().length<6?showError(n,"Mật khẩu quá ngắn"):""===t.value.trim()?showError(t,"Không được để trống Mật khẩu mới"):t.value.trim().length<6?showError(t,"Mật khẩu quá ngắn"):""===r.value.trim()?showError(r,"Không được để trống Xác nhận mật khẩu"):r.value.trim()!==t.value.trim()?showError(r,"Xác nhận mật khẩu không khớp với mật khẩu mới"):void this.submit()});