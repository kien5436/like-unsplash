function drawChart(t,e){let i=[],s=[];for(let t=0;t<30;t++)i[t]=t+1;for(let t=e.length-1;t>=0;t--)s[t]={data:e[t].data,color:"#"+((1<<24)*Math.random()|0).toString(16),label:e[t].label};new Chart({canvasId:"chart",name:t,xAxisLabel:i,yAxisLabel:[0,25,50,75,100],charts:s}).draw()}Element.prototype.css=function(t){for(prop in t)t.hasOwnProperty(prop)&&this.style.setProperty(prop,t[prop])},Element.prototype.hasClass=function(t){return this.classList.contains(t)||this.parentNode.classList.contains(t)},document.addEventListener("click",function(t){let e=t.target.closest(".btn-dropdown");if(e){let t=document.getElementsByClassName("btn-dropdown-menu"),i=e.getElementsByClassName("btn-dropdown-menu")[0];for(let e=t.length-1;e>=0;e--)t[e]===i?i.classList.toggle("show"):t[e].classList.remove("show")}else!!document.querySelector(".btn-dropdown-menu.show")&&document.querySelector(".btn-dropdown-menu.show").classList.remove("show")}),document.getElementById("burger").addEventListener("click",function(){let t=document.getElementsByClassName("sidebar")[0],e=document.getElementsByClassName("container")[0];0===t.getBoundingClientRect().left?(t.style.setProperty("left","-100%"),e.style.setProperty("margin-left",0)):(t.style.setProperty("left",0),e.style.setProperty("margin-left","20%"))});let a=document.querySelectorAll(".menu-item a");for(let t=a.length-1;t>=0;t--){if(location.pathname.indexOf("/quan-tri")>=0){a[0].className="active";break}location.href==a[t].href?a[t].className="active":a[t].className=""}const Chart=function(t){this.canvas=document.getElementById(t.canvasId),this.canvas.width=this.canvas.parentNode.getBoundingClientRect().width,this.canvas.height=390,this.name=t.name||"",this.lineLevel=!t.hasOwnProperty("lineLevel")||t.lineLevel,this.numLevel=t.numLevel||5,this.xAxisLabel=t.xAxisLabel,this.yAxisLabel=t.yAxisLabel,this.paddingLeft=30,this.paddingRight=200,this.paddingTop=10,this.paddingBottom=60,this.paddingX=(this.canvas.width-this.paddingLeft-this.paddingRight)/(this.xAxisLabel.length-1),this.paddingY=(this.canvas.height-this.paddingTop-this.paddingBottom)/(this.yAxisLabel.length-1),this.ctx=this.canvas.getContext("2d"),this.charts=t.charts};Chart.prototype.draw=function(){let t,e,i;this.drawXAxis(),this.drawYAxis(),this.lineLevel&&this.drawLineLevel(),""!=this.name&&this.setName();for(let s=0;s<this.charts.length;s++){e=this.charts[s],i=this.offset(e.data),t=this.paddingLeft;for(let s=0,n=i.length;s<n&&(this.ctx.beginPath(),this.ctx.fillStyle="#f00",this.ctx.arc(t,i[s],2,0,2*Math.PI),this.ctx.fill(),s!=n-1);s++)t+=this.paddingX,this.ctx.lineTo(t,i[s+1]),this.ctx.strokeStyle=e.color||"#000",this.ctx.stroke()}this.setAnotation()},Chart.prototype.setAnotation=function(){let t=this.canvas.width-this.paddingRight+20,e=this.paddingTop;this.ctx.beginPath();for(let i=0;i<this.charts.length;i++)this.ctx.fillStyle=this.charts[i].color,this.ctx.fillRect(t,e,10,10),this.ctx.fillStyle="#000",this.ctx.font='400 1.2rem "Source San Pro", sans-serif',this.ctx.textBaseline="middle",this.ctx.fillText(this.charts[i].label,t+50,e+7),e+=30},Chart.prototype.offset=function(t){let e=this.canvas.height-this.paddingBottom;for(let i=0;i<t.length;i++)t[i]=Math.ceil(e*(1-t[i]/100))||this.paddingTop;return t},Chart.prototype.setName=function(){this.ctx.fillStyle="#000",this.ctx.font='700 1.5em "Source Sans Pro", sans-serif',this.ctx.textAlign="center",this.ctx.fillText(this.name,this.canvas.width/2,this.canvas.height-20)},Chart.prototype.drawLineLevel=function(){let t=(this.canvas.height-this.paddingBottom-this.paddingTop)/(this.numLevel-1),e=this.canvas.width-this.paddingRight,i=this.paddingTop;this.ctx.beginPath();for(let s=0;s<this.numLevel;s++)this.ctx.moveTo(this.paddingLeft,i),this.ctx.lineTo(e,i),this.ctx.strokeStyle="#999",this.ctx.stroke(),i+=t},Chart.prototype.drawXAxis=function(){this.ctx.beginPath(),this.ctx.strokeStyle="#999",this.ctx.font='1em "Source Sans Pro", sans-serif',this.ctx.textAlign="center",this.ctx.save(),this.ctx.moveTo(this.paddingLeft,this.canvas.height-this.paddingBottom),this.ctx.lineTo(this.canvas.width-this.paddingRight,this.canvas.height-this.paddingBottom),this.ctx.stroke();let t=this.paddingLeft;for(let e=0;e<this.xAxisLabel.length;e++)this.ctx.beginPath(),this.ctx.moveTo(t,this.canvas.height-this.paddingBottom),this.ctx.lineTo(t,this.canvas.height-50),this.ctx.fillText(this.xAxisLabel[e],t,this.canvas.height-40),this.ctx.stroke(),t+=this.paddingX},Chart.prototype.drawYAxis=function(){this.ctx.beginPath(),this.ctx.restore(),this.ctx.moveTo(this.paddingLeft,this.canvas.height-this.paddingBottom),this.ctx.lineTo(this.paddingLeft,this.paddingTop),this.ctx.stroke();let t=this.canvas.height-this.paddingBottom;for(let e=0;e<this.yAxisLabel.length;e++)this.ctx.beginPath(),this.ctx.moveTo(this.paddingLeft,t),this.ctx.lineTo(this.paddingLeft-10,t),this.ctx.textBaseline="middle",this.ctx.fillText(this.yAxisLabel[e],this.paddingLeft-20,t),this.ctx.stroke(),t-=this.paddingY};let boards=document.getElementsByClassName("board");for(let t=boards.length-1;t>=0;t--)boards[t].addEventListener("click",function(){let e=this;$.ajax({url:"/Statistic/getMetrics/"+(t+1),success:function(t){t=JSON.parse(t),drawChart(e.getElementsByClassName("board-title")[0].innerHTML,t)},error:function(t){console.error(t)}})});window.addEventListener("load",function(){$.ajax({url:"/Statistic/getMetrics/0",success:function(t){drawChart("Tá»•ng quan",t=JSON.parse(t))},error:function(t){console.error(t)}})});