function isEmail(e){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e.trim())}function validate(e,t){switch(e){case"email":return isEmail(t);default:return"what do you want?"}}function showError(e,t){if(e.nextElementSibling&&e.nextElementSibling.id!==`${e.type}-error`||!e.nextElementSibling){const n=document.createElement("p");n.id=`${e.type}-error`,n.classList.add("error-input"),n.innerHTML=t,e.parentNode.appendChild(n)}return e.focus(),!1}function changeTab(e,t){let n,o=e.href.replace(/.*#(\w+)/i,"$1");for(let s=0;s<t.length;s++)t[s]===e?(e.classList.add("tab-nav-active"),document.getElementById(o).classList.add("tab-pane-active")):t[s].classList.contains("tab-nav-active")&&(t[s].classList.remove("tab-nav-active"),n=t[s].href.replace(/.*#(\w+)/i,"$1"),document.getElementById(n).classList.remove("tab-pane-active"))}function toggleNavTab(e){document.body.clientWidth<=720&&document.querySelector(`${e} .tab-item:first-child`).addEventListener("click",function(){document.querySelectorAll(`${e} .tab-item:not(:first-child)`).foreach(function(e){e.style.display="none"==e.style.display?"block":"none"})})}function love(e,t=!0){let n=(e=e.closest(".btn-love").getElementsByClassName("fa")[0]).nextElementSibling;e.classList.contains("fa-heart-o")?(e.classList.remove("fa-heart-o"),e.classList.add("fa-heart"),e.style.setProperty("color","#f00"),n.innerHTML=parseInt(n.innerHTML)+1):(e.classList.remove("fa-heart"),e.classList.add("fa-heart-o"),e.style.setProperty("color","unset"),n.innerHTML=parseInt(n.innerHTML)-1),t&&$.ajax({url:"/like-unsplash/Photos/seeAndLove/love/"+e.closest(".pid").id,success:function(e){window.location=e},error:function(e){console.error("Error on loving a photo: ",e)}})}function updateDownload(e,t=!0){let n=e.closest(".btn-download").getElementsByTagName("span")[0];n.innerHTML=parseInt(n.innerHTML)+1,t&&$.ajax({url:"/like-unsplash/Photos/seeAndLove/download/"+e.closest(".pid").id,error:function(e){console.error("Error on updating downloaded photo: ",e)}})}function delPhoto(e,t){$.ajax({url:"/like-unsplash/Photos/delphoto/"+t,success:function(t){document.body.insertAdjacentHTML("beforeend",t),e.closest(".figure").remove()},error:function(e){console.error("Error on deleting photo: ",e)}})}Element.prototype.css=function(e){for(prop in e)e.hasOwnProperty(prop)&&this.style.setProperty(prop,e[prop])},Element.prototype.hasClass=function(e){return this.classList.contains(e)||this.parentNode.classList.contains(e)},document.addEventListener("input",function(e){if("INPUT"==e.target.tagName){let t=e.target.nextElementSibling;t&&t.id===`${e.target.type}-error`&&t.remove(),"searchEverything"==e.target.name&&e.target.parentElement.style.setProperty("border-color","#ccc")}}),document.addEventListener("change",function(e){if("INPUT"==e.target.tagName){let t=e.target.parentNode.getElementsByClassName("error-input")[0];t&&t.id===`${e.target.type}-error`&&t.remove()}});let lastScrollTop=pageYOffset||document.documentElement.scrollTop;window.addEventListener("scroll",function(){let e=pageYOffset||document.documentElement.scrollTop;if(e>lastScrollTop&&pageYOffset+innerHeight+300>=document.body.clientHeight){let e=document.getElementById("next-p").value,t=document.getElementById("hidden-se").value.trim();document.getElementById("next-p").remove(),$.ajax({url:"/like-unsplash/Photos/loadmore/"+e+"/"+t,success:function(e){document.getElementsByClassName("masonry")[0].insertAdjacentHTML("beforeend",e)},error:function(e){console.error("Error on loading more photos: ",e)}})}lastScrollTop=e<=0?0:e},!1),document.querySelector(".search-box input[type=text]").addEventListener("input",function(){this.value.trim().length>0?document.getElementById("btn-reset").style.setProperty("display","initial"):document.getElementById("btn-reset").style.setProperty("display","none")}),document.querySelector(".search-box input[type=text]").addEventListener("mouseover",function(){this.value.trim().length>0?document.getElementById("btn-reset").style.setProperty("display","initial"):document.getElementById("btn-reset").style.setProperty("display","none")}),document.getElementById("btn-reset").addEventListener("click",function(){this.previousElementSibling.value="",this.previousElementSibling.focus(),this.style.setProperty("display","none")}),document.getElementById("search-form").addEventListener("submit",function(e){e.preventDefault(),window.location="/like-unsplash/tim-kiem/"+this.querySelector("input[name=se]").value.trim()});try{document.getElementsByClassName("btn-upload")[0].addEventListener("click",function(){0==document.getElementsByClassName("upload").length?$.ajax({url:"/like-unsplash/user/home/loadFormUpload",success:function(e){document.getElementsByTagName("script")[0].insertAdjacentHTML("beforebegin",e);let t=document.createElement("script"),n=document.getElementById("uploadjs");t.src=n.getAttribute("data-src"),document.body.appendChild(t),n.remove(),setTimeout(function(){document.getElementsByClassName("upload")[0].css({opacity:1,visibility:"visible"})},10)},error:function(e){console.error("Error on loadFormUpload: ",e)}}):document.getElementsByClassName("upload")[0].css({opacity:1,visibility:"visible"})})}catch(e){console.error(e)}document.addEventListener("click",function(e){let t=e.target.closest(".btn-dropdown");if(t){let e=document.getElementsByClassName("btn-dropdown-menu"),n=t.getElementsByClassName("btn-dropdown-menu")[0];for(let t=e.length-1;t>=0;t--)e[t]===n?n.classList.toggle("show"):e[t].classList.remove("show")}else!!document.querySelector(".btn-dropdown-menu.show")&&document.querySelector(".btn-dropdown-menu.show").classList.remove("show")}),document.addEventListener("click",function(e){if(e.target.hasClass("thumbnail")){let t=e.target.closest(".figure").id,n=e.target.closest(".figure").querySelector(".btn-love"),o=e.target.closest(".figure").querySelector(".btn-download");document.body.style.setProperty("overflow","hidden"),$.ajax({url:"/like-unsplash/Photos/viewLarge/"+t,success:function(e){document.getElementsByTagName("script")[0].insertAdjacentHTML("beforebegin",e),document.getElementsByClassName("larger-img")[0].addEventListener("click",function(e){switch(e.target.className){case"fa fa-times fa-2x":this.remove(),document.body.style.setProperty("overflow","auto");break;case"btn btn-love":case"fa fa-heart-o":case"fa fa-heart":case"love-num":love(n,!1);break;case"btn btn-download":case"fa fa-arrow-down":case"down-num":updateDownload(o,!1)}})},error:function(e){console.error("Error on loading larger image: ",e)}})}else e.target.hasClass("btn-love")?love(e.target):e.target.hasClass("btn-download")?updateDownload(e.target):e.target.hasClass("btn-more")?e.target.closest(".btn-more").nextElementSibling.classList.toggle("show"):e.target.hasClass("btn-del")&&delPhoto(e.target,e.target.id)});let thumbnail=document.getElementsByClassName("thumbnail");for(let e=thumbnail.length-1;e>=0;e--)thumbnail[e].addEventListener("mouseout",function(){this.closest(".figure").getElementsByClassName("figure-buttons-menu")[0].classList.remove("show")});let gallery=document.querySelectorAll(".gallery .tab-nav");for(let e=gallery.length-1;e>=0;e--)gallery[e].addEventListener("click",function(e){e.preventDefault(),changeTab(this,gallery)});