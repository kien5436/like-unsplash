function isEmail(e){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e.trim())}function inArray(e,t){return-1!=e.indexOf(t)}function validate(e,...t){switch(e){case"email":return isEmail(t[0]);case"in array":return inArray(t[0],t[1]);default:return"what do you want?"}}function showError(e,t){if(e.nextElementSibling&&e.nextElementSibling.id!==`${e.type}-error`||!e.nextElementSibling){const n=document.createElement("p");n.id=`${e.type}-error`,n.classList.add("error-input"),n.innerHTML=t,e.parentNode.appendChild(n)}return e.focus(),!1}function displayValue(){let e,t=document.getElementById("field").value;switch(t){case"slug_name":case"email":case"location":e=document.getElementById("value-other").content.cloneNode(!0);break;case"sex":case"role":let n=document.getElementById(`value-${t}`).content.cloneNode(!0);n&&((e=document.createElement("select")).name="value",e.className="select",e.appendChild(n))}void 0!==e&&(document.getElementById("value").firstElementChild&&"error-input"!=document.getElementById("value").firstElementChild.className&&document.getElementById("value").firstElementChild.remove(),document.getElementById("value").appendChild(e))}Element.prototype.css=function(e){for(prop in e)e.hasOwnProperty(prop)&&this.style.setProperty(prop,e[prop])},Element.prototype.hasClass=function(e){return this.classList.contains(e)||this.parentNode.classList.contains(e)},document.addEventListener("input",function(e){if("INPUT"==e.target.tagName){let t=e.target.nextElementSibling;t&&"error-input"==t.className&&t.remove()}}),document.addEventListener("change",function(e){if("INPUT"==e.target.tagName){let t=e.target.parentNode.getElementsByClassName("error-input")[0];t&&"error-input"==t.className&&t.remove()}});let lastScrollTop=pageYOffset||document.documentElement.scrollTop;window.addEventListener("scroll",function(){let e=pageYOffset||document.documentElement.scrollTop;if(e>lastScrollTop&&pageYOffset+innerHeight+300>=document.body.clientHeight){let e,t;window.location.pathname.indexOf("trang-ca-nhan")>=0?(e=Array.pop(window.location.pathname.split(".")),e=JSON.stringify({uid:e})):e=document.getElementById("hidden-se").value.trim();try{t=document.getElementById("next-p").value,document.getElementById("next-p").remove(),$.ajax({url:"/Photos/loadMore",data:{offset:t,kw:e},success:function(e){document.getElementsByClassName("masonry")[0].insertAdjacentHTML("beforeend",e)},error:function(e){console.error("Error on loading more photos: ",e)}})}catch(e){console.clear()}}lastScrollTop=e<=0?0:e},!1),document.addEventListener("click",function(e){let t=e.target.closest(".btn-dropdown");if(t){let e=document.getElementsByClassName("btn-dropdown-menu"),n=t.getElementsByClassName("btn-dropdown-menu")[0];for(let t=e.length-1;t>=0;t--)e[t]===n?n.classList.toggle("show"):e[t].classList.remove("show")}else!!document.querySelector(".btn-dropdown-menu.show")&&document.querySelector(".btn-dropdown-menu.show").classList.remove("show")}),document.getElementById("burger").addEventListener("click",function(){let e=document.getElementsByClassName("sidebar")[0],t=document.getElementsByClassName("container")[0];0===e.getBoundingClientRect().left?(e.style.setProperty("left","-100%"),t.style.setProperty("margin-left",0)):(e.style.setProperty("left",0),t.style.setProperty("margin-left","20%"))});let a=document.querySelectorAll(".menu-item a");for(let e=a.length-1;e>=0;e--){if(location.pathname.indexOf("/quan-tri")>=0){a[0].className="active";break}location.href==a[e].href?a[e].className="active":a[e].className=""}document.addEventListener("click",function(e){const t=e.target,n=document.getElementsByClassName("modal")[0];if(t.hasClass("rm-user"))n.classList.remove("hide"),n.classList.add("show"),document.getElementById("modal-cancel").focus(),document.getElementById("modal-accept").previousElementSibling.value=t.id,rmUser=t;else if("modal-cancel"==t.id)n.classList.remove("show"),n.classList.add("hide");else if("modal-accept"==t.id){let e=document.getElementById("modal-accept").previousElementSibling.value;$.ajax({url:"/Users/delUser/"+e,success:function(t){document.getElementById("modal-cancel").click(),t=JSON.parse(t),document.body.insertAdjacentHTML("beforeend",t.notif),!t.error&&document.getElementById(e).closest(".user").remove()},error:function(e){console.error("Error on deleting user")}})}}),document.getElementById("field").addEventListener("change",displayValue),window.addEventListener("load",displayValue),document.getElementById("filter").addEventListener("submit",function(e){e.preventDefault();let t=document.getElementById("field"),n=document.querySelector("#value input")||document.querySelector("#value select"),l=document.getElementById("order");return null!==n&&""===n.value.trim()?showError(n,"Chưa có điều kiện lọc"):""===t.value.trim()?showError(t,"Chưa chọn điều kiện lọc"):0==validate("in array",["slug_name","email","sex","location","role"],t.value.trim())?showError(t,"Bộ lọc không hợp lệ"):""===l.value.trim()?showError(l,"Chưa chọn sắp xếp kết quả lọc"):0==validate("in array",["desc","asc"],l.value.trim())?showError(l,"Bộ lọc không hợp lệ"):void this.submit()});